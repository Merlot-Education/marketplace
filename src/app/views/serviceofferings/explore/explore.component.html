<h1 *ngIf="orgaOfferings.length > 0">Service Angebote meiner Organisation</h1>

<c-row>
  <c-col xs *ngFor="let offering of orgaOfferings">
    <c-card class="mb-4">
      <c-card-header>{{ offering.type.replace("merlot:", "") }} : {{ offering.name }}</c-card-header>
      <c-card-body>
        <c-row>
          <c-col>
            <ul class="list-group list-group-flush">
              <li class="list-group-item" style="border: none">
                <strong>Service ID:</strong> <br />
                {{ offering.id }}
              </li>
              <li class="list-group-item" style="border: none">
                <strong>Erstelldatum:</strong><br />
                {{ offering.creationDate }}
              </li>
              <li class="list-group-item" style="border: none">
                <strong>Anbieter:</strong><br />
                {{ resolveOrganizationLegalName(offering.offeredBy) }}
              </li>
              <li class="list-group-item" style="border: none">
                <strong>Status:</strong><br />
                {{ resolveMerlotStatusFriendlyName(offering.merlotState) }}
              </li>
            </ul>
            <div class="flex-container" style="padding: 10px">
              <button type="button" class="btn btn-primary flex-item-grow" [cModalToggle]="modalXl.id">
                Details
              </button>
              <button type="button" class="btn btn-primary disabled flex-item-grow">
                Bearbeiten
              </button>
              <button type="button" class="btn btn-primary flex-item-grow" 
              *ngIf="offering.merlotState === 'REVOKED'"
              (click)="inDraftOffering(offering.id)"
              >
                Entwurf 
              </button>
              <button type="button" class="btn btn-primary flex-item-grow" 
              *ngIf="(offering.merlotState === 'IN_DRAFT') || (offering.merlotState === 'REVOKED')"
              (click)="releaseOffering(offering.id)"
              >
                Veröffentlichen
              </button>
              <button type="button" class="btn btn-primary flex-item-grow" 
              *ngIf="offering.merlotState === 'RELEASED'"
              (click)="revokeOffering(offering.id)"
              >
                Widerrufen
              </button>
              <button type="button" class="btn btn-primary flex-item-grow" 
              *ngIf="(offering.merlotState === 'IN_DRAFT') || (offering.merlotState === 'REVOKED')"
              (click)="deleteOffering(offering.id)"
              >
                Löschen
              </button>
            </div>
          </c-col>
        </c-row>
      </c-card-body>
    </c-card>
  </c-col>
</c-row>

<h1 *ngIf="offerings.length > 0">Öffentliche Service Angebote</h1>

<c-row>
  <c-col xs *ngFor="let offering of offerings">
    <c-card class="mb-4">
      <c-card-header>{{ offering.name }}</c-card-header>
      <c-card-body>
        <c-row>
          <c-col>
            <ul class="list-group list-group-flush">
              <li class="list-group-item" style="border: none">
                <strong>Service ID:</strong> <br />
                {{ offering.id }}
              </li>
              <li class="list-group-item" style="border: none">
                <strong>Erstelldatum:</strong><br />
                {{ offering.creationDate }}
              </li>
              <li class="list-group-item" style="border: none">
                <strong>Anbieter:</strong><br />
                {{ resolveOrganizationLegalName(offering.offeredBy) }}
              </li>
            </ul>
            <div class="row" style="padding: 10px">
              <button type="button" class="btn btn-primary" [cModalToggle]="modalXl.id">
                Details
              </button>
            </div>
          </c-col>
        </c-row>
      </c-card-body>
    </c-card>
  </c-col>
</c-row>

<h1 *ngIf="orgaOfferings.length === 0 && offerings.length === 0">Es konnten keine Service Angebote gefunden werden.</h1>

<c-modal #modalXl id="modalXl" size="xl">
  <c-modal-header>
    <h5 cModalTitle>Extra large modal</h5>
  </c-modal-header>
  <c-modal-body>...</c-modal-body>
</c-modal>
